"use strict";var I=Object.defineProperty;var nt=Object.getOwnPropertyDescriptor;var ot=Object.getOwnPropertyNames;var rt=Object.prototype.hasOwnProperty;var at=(t,e)=>{for(var n in e)I(t,n,{get:e[n],enumerable:!0})},it=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ot(e))!rt.call(t,o)&&o!==n&&I(t,o,{get:()=>e[o],enumerable:!(r=nt(e,o))||r.enumerable});return t};var st=t=>it(I({},"__esModule",{value:!0}),t);var zt={};at(zt,{default:()=>et});module.exports=st(zt);var d=require("@raycast/api"),M=require("react");function c(t){let e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function y(t,e){let n=c(t),r=c(e),o=n.getTime()-r.getTime();return o<0?-1:o>0?1:o}var ct=Math.pow(10,8)*24*60*60*1e3,Qt=-ct;var w=43200,W=1440;var ut=3600;var k=ut*24,$t=k*7,mt=k*365.2425,dt=mt/12,Ut=dt*3;function O(t,e){let n=c(t),r=c(e),o=n.getFullYear()-r.getFullYear(),u=n.getMonth()-r.getMonth();return o*12+u}function A(t){let e=c(t);return e.setHours(23,59,59,999),e}function N(t){let e=c(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function C(t){let e=c(t);return+A(e)==+N(e)}function L(t,e){let n=c(t),r=c(e),o=y(n,r),u=Math.abs(O(n,r)),s;if(u<1)s=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-o*u);let a=y(n,r)===-o;C(c(t))&&u===1&&y(t,r)===1&&(a=!1),s=o*(u-Number(a))}return s===0?0:s}function E(t){return e=>{let r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Y(t,e){return+c(t)-+c(e)}function X(t,e,n){let r=Y(t,e)/1e3;return E(n?.roundingMethod)(r)}var lt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},j=(t,e,n)=>{let r,o=lt[t];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function v(t){return(e={})=>{let n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}var ft={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ht={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_={date:v({formats:ft,defaultWidth:"full"}),time:v({formats:ht,defaultWidth:"full"}),dateTime:v({formats:pt,defaultWidth:"full"})};var gt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},q=(t,e,n,r)=>gt[t];function b(t){return(e,n)=>{let r=n?.context?String(n.context):"standalone",o;if(r==="formatting"&&t.formattingValues){let s=t.defaultFormattingWidth||t.defaultWidth,a=n?.width?String(n.width):s;o=t.formattingValues[a]||t.formattingValues[s]}else{let s=t.defaultWidth,a=n?.width?String(n.width):t.defaultWidth;o=t.values[a]||t.values[s]}let u=t.argumentCallback?t.argumentCallback(e):e;return o[u]}}var yt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},bt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Mt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Dt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vt=(t,e)=>{let n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},z={ordinalNumber:vt,era:b({values:yt,defaultWidth:"wide"}),quarter:b({values:bt,defaultWidth:"wide",argumentCallback:t=>t-1}),month:b({values:xt,defaultWidth:"wide"}),day:b({values:Mt,defaultWidth:"wide"}),dayPeriod:b({values:Dt,defaultWidth:"wide",formattingValues:wt,defaultFormattingWidth:"wide"})};function x(t){return(e,n={})=>{let r=n.width,o=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],u=e.match(o);if(!u)return null;let s=u[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Pt(a,D=>D.test(s)):St(a,D=>D.test(s)),i;i=t.valueCallback?t.valueCallback(l):l,i=n.valueCallback?n.valueCallback(i):i;let f=e.slice(s.length);return{value:i,rest:f}}}function St(t,e){for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Pt(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function H(t){return(e,n={})=>{let r=e.match(t.matchPattern);if(!r)return null;let o=r[0],u=e.match(t.parsePattern);if(!u)return null;let s=t.valueCallback?t.valueCallback(u[0]):u[0];s=n.valueCallback?n.valueCallback(s):s;let a=e.slice(o.length);return{value:s,rest:a}}}var Rt=/^(\d+)(th|st|nd|rd)?/i,It=/\d+/i,Wt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Tt={any:[/^b/i,/^(a|c)/i]},Ft={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kt={any:[/1/i,/2/i,/3/i,/4/i]},Ot={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},At={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Nt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ct={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Lt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Et={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},V={ordinalNumber:H({matchPattern:Rt,parsePattern:It,valueCallback:t=>parseInt(t,10)}),era:x({matchPatterns:Wt,defaultMatchWidth:"wide",parsePatterns:Tt,defaultParseWidth:"any"}),quarter:x({matchPatterns:Ft,defaultMatchWidth:"wide",parsePatterns:kt,defaultParseWidth:"any",valueCallback:t=>t+1}),month:x({matchPatterns:Ot,defaultMatchWidth:"wide",parsePatterns:At,defaultParseWidth:"any"}),day:x({matchPatterns:Nt,defaultMatchWidth:"wide",parsePatterns:Ct,defaultParseWidth:"any"}),dayPeriod:x({matchPatterns:Lt,defaultMatchWidth:"any",parsePatterns:Et,defaultParseWidth:"any"})};var T={code:"en-US",formatDistance:j,formatLong:_,formatRelative:q,localize:z,match:V,options:{weekStartsOn:0,firstWeekContainsDate:1}};var Yt={};function J(){return Yt}function F(t){let e=c(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function B(t,e,n){let r=J(),o=n?.locale??r.locale??T,u=2520,s=y(t,e);if(isNaN(s))throw new RangeError("Invalid time value");let a=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:s}),l,i;s>0?(l=c(e),i=c(t)):(l=c(t),i=c(e));let f=X(i,l),D=(F(i)-F(l))/1e3,m=Math.round((f-D)/60),g;if(m<2)return n?.includeSeconds?f<5?o.formatDistance("lessThanXSeconds",5,a):f<10?o.formatDistance("lessThanXSeconds",10,a):f<20?o.formatDistance("lessThanXSeconds",20,a):f<40?o.formatDistance("halfAMinute",0,a):f<60?o.formatDistance("lessThanXMinutes",1,a):o.formatDistance("xMinutes",1,a):m===0?o.formatDistance("lessThanXMinutes",1,a):o.formatDistance("xMinutes",m,a);if(m<45)return o.formatDistance("xMinutes",m,a);if(m<90)return o.formatDistance("aboutXHours",1,a);if(m<W){let h=Math.round(m/60);return o.formatDistance("aboutXHours",h,a)}else{if(m<u)return o.formatDistance("xDays",1,a);if(m<w){let h=Math.round(m/W);return o.formatDistance("xDays",h,a)}else if(m<w*2)return g=Math.round(m/w),o.formatDistance("aboutXMonths",g,a)}if(g=L(i,l),g<12){let h=Math.round(m/w);return o.formatDistance("xMonths",h,a)}else{let h=g%12,R=Math.trunc(g/12);return h<3?o.formatDistance("aboutXYears",R,a):h<9?o.formatDistance("overXYears",R,a):o.formatDistance("almostXYears",R+1,a)}}var P=require("@raycast/api"),$=require("react");function Q(t,e){return Number(t.date)-Number(e.date)}function S(t,e,n){return{error:t,message:e,...n&&{meta:n}}}function U(t,e){(0,$.useEffect)(()=>{e(!0);async function n(){let r=await P.LocalStorage.allItems();if(!Object.keys(r).length){e(!1);return}let o=[];for(let u in r)try{let s=JSON.parse(r[u]);s.date=new Date(s.date),o.push(s)}catch(s){(0,P.captureException)(S(s,"Error parsing stored reminder from local storage",{reminderId:u,localStorage:r}))}o.sort(Q),t(o),e(!1)}n()},[])}function G(t){return!!t.frequency}function K(t){return!t.frequency}function Z(t){return t.find(e=>e.date.getTime()>new Date().getTime())}var p=require("react/jsx-runtime"),Xt="raycast://extensions/comoser/simple-reminder/index",jt={name:"Raycast",path:"/Applications/Raycast.app"},_t=2*60*60*1e3,tt=30;function qt(t){if(!t||!(t instanceof Date))return"";try{return t.getTime()-new Date().getTime()<_t?B(t,new Date,{addSuffix:!0}):t.toLocaleString()}catch(e){(0,d.captureException)(S(e,"Error getting date time string for menu bar title",{date:t,type:typeof t,localizedDate:t.toLocaleString()}))}return""}function et(){let[t,e]=(0,M.useState)(!0),[n,r]=(0,M.useState)([]),o=(0,M.useMemo)(()=>n.filter(G),[n]),u=(0,M.useMemo)(()=>n.filter(K),[n]);U(r,e);let s=()=>{let i=Z(n);return i?`${i.topic.length>tt?`${i.topic.substring(0,tt)}...`:i.topic} ${qt(i.date)}`:"No reminders set"},a=i=>async()=>await d.Clipboard.copy(i),l=()=>{(0,d.open)(Xt,jt)};return(0,p.jsxs)(d.MenuBarExtra,{isLoading:t,icon:"menu-bar-logo.png",title:s(),tooltip:"Simple Reminder",children:[!t&&!o.length&&!u.length&&(0,p.jsx)(d.MenuBarExtra.Item,{title:"Add a reminder",onAction:l}),o.length?(0,p.jsx)(d.MenuBarExtra.Section,{title:"Recurrent reminders",children:o.map(i=>(0,p.jsx)(d.MenuBarExtra.Item,{title:i.topic,subtitle:`set to ${i.date.toLocaleString()} ${i.frequency?`(happening ${i.frequency})`:""}`,onAction:a(i.topic),icon:"repeat.png"},i.id))}):null,u.length?(0,p.jsx)(d.MenuBarExtra.Section,{title:"Other reminders",children:u.map(i=>(0,p.jsx)(d.MenuBarExtra.Item,{title:i.topic,subtitle:`set to ${i.date.toLocaleString()}`,onAction:a(i.topic),icon:"bell.png"},i.id))}):null]})}
